(()=>{"use strict";let e=[];const t=t=>e.splice(t,1),l=function l(){let o=document.getElementById("libraryTableBody");o.innerHTML="";for(let n=0;n<e.length;n++){let a=e[n],d=document.createElement("tr"),s=document.createElement("img"),i=`https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(a.title+" "+a.author)}&maxResults=1`;async function c(){try{const e=await fetch(i),t=await e.json();t.items&&t.items.length>0&&t.items[0].volumeInfo.imageLinks?s.src=t.items[0].volumeInfo.imageLinks.thumbnail:setTimeout(c,1e4)}catch(e){setTimeout(c,1e4)}}c();let m=document.createElement("td");m.appendChild(s),d.appendChild(m);let u=document.createElement("td");u.innerHTML=`<strong>Title:</strong> ${a.title}<br><strong>Author:</strong> ${a.author}<br><strong>Total pages:</strong> ${a.pages}`,d.appendChild(u);let r=document.createElement("td"),p=document.createElement("button");p.innerHTML=a.read?'<i class="fa-solid fa-check"></i>':' <i class="fa-solid fa-x"></i>',p.onclick=()=>{a.read=!a.read,p.innerHTML=a.read?' <i class="fa-solid fa-check"></i>':' <i class="fa-solid fa-x"></i>'},p.classList.add("bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded-full","mx-auto","block");let h=document.createElement("button");h.innerHTML='<i class="fa-solid fa-trash"></i>',h.classList.add("deleteButton","bg-red-500","hover:bg-red-700","text-white","font-bold","py-2","px-4","rounded-full","mx-auto","block"),h.onclick=()=>{t(n),l()},r.appendChild(p),r.appendChild(document.createElement("br")),r.appendChild(h),d.appendChild(r),o.appendChild(d)}},o=()=>document.getElementById("addBookModal").style.display="none";window._form={openForm:()=>document.getElementById("addBookModal").style.display="block",closeForm:o,submitBook:t=>{t.preventDefault(),((t,l,o,n)=>{const a=new class{constructor(e,t,l,o){this.title=e,this.author=t,this.pages=l,this.read=o}}(t,l,o,!1);e.push(a)})(document.getElementById("title").value,document.getElementById("author").value,document.getElementById("pages").value),o(),l(),document.getElementById("title").value=document.getElementById("author").value=document.getElementById("pages").value=""},deleteAllBooks:()=>{e=[],l()}}})();